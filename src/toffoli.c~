#include <stdio.h>
#include "quantum_sim.h"
#include "three_qubit_gates.h"

void circuit(QubitState* state) {
    // Inizializza lo stato con 3 qubit
    state = initializeState(3);

    // Applica una porta Hadamard sui primi due qubit per creare una superposizione
    applyHadamard(state, 0);
    applyHadamard(state, 1);

    // Stampa lo stato prima dell'applicazione del gate Toffoli
    printf("Stato prima dell'applicazione del Toffoli:\n");
    printState(state);

    // Esempio di utilizzo del gate Toffoli su qubit 0, 1 come controllori e qubit 2 come target
    int control1 = 0;
    int control2 = 1;
    int target = 2;

    // Applica la porta Toffoli
    toffoli_gate(state, control1, control2, target);

    // Stampa lo stato dopo aver applicato la porta Toffoli
    printf("Stato dopo l'applicazione del Toffoli:\n");
    printState(state);

    // Libera la memoria dello stato
    freeState(state);
}
